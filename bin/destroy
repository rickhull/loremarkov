#!/usr/bin/env ruby

def usage msg=nil
  puts "ERROR: #{msg}" if msg
  puts "USAGE:\n  destroy filename"
  exit 1
end

require 'loremarkov'

filename = ARGV.first or usage "provide an input file"
num_prefixes = ARGV[1] ? ARGV[1].to_i : 5
text = File.read(filename)

puts Loremarkov.new(num_prefixes).destroy text
