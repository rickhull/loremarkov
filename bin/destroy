#!/usr/bin/env ruby

require 'loremarkov'

# accept text from STDIN or filename
#
text = if $stdin.tty?
         filename = ARGV.shift || 'lorem_ipsum'
         unless File.exists?(filename)
           filename = File.join(__dir__, '..', 'text', filename)
         end
         File.read(filename)
       else
         $stdin.read
       end

num_prefixes = ARGV.shift
puts Loremarkov.new(num_prefixes ? num_prefixes.to_i : 5).destroy text
