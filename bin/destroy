#!/usr/bin/env ruby

def usage msg=nil
  puts "ERROR: #{msg}" if msg
  puts "USAGE:\n  destroy filename"
  exit 1
end

require 'loremarkov'


filename = ARGV.first or usage "provide an input file"
unless File.exists?(filename)
  filename = File.join(__dir__, '..', 'lib', 'sample_text', filename)
end
raise("unknown file: #{filename}:") unless File.exists?(filename)
text = File.read(filename)
num_prefixes = ARGV[1] ? ARGV[1].to_i : 5

puts Loremarkov.new(num_prefixes).destroy text
